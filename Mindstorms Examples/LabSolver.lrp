;;; New program created by johanfabry on 17 December 2015;;; Solver for the labyrinth in the robotics lab of the DCC(var white := [6])(var pink :=[6]) ;!!!!!!!!!!!!!!!! ERROR (var green :=[3])(var red :=[5])(var blue := [1])(var lightsensor := [robot sensor3])(var ultsensor := [robot sensor2])(var rightmotor := [robot motorA])(var leftmotor := [robot motorD])(var headmotor := [robot motorB])(var turnspeed := [10])(var intersect :=[false])(machine onestep	(state line		(machine linefollow			(state offline				(onentry [rightmotor startAtSpeed: turnspeed])				(onexit [rightmotor stop]))			(state online				(onentry [leftmotor startAtSpeed: turnspeed])				(onexit [leftmotor stop]))			(on readline offline -> online)			(on noline online ->offline)			(event readline [lightsensor read = blue])			(event noline [lightsensor read = white])			(event readred [lightsensor read = red])			(on readred *-> eol)			(state eol (onentry [intersect := true])))		(onentry (spawn linefollow offline)))	(on detinter line -> intercenter)	(event detinter [intersect])	(state intercenter		(onentry [			intersect := false.			rightmotor startAtSpeed: turnspeed.			leftmotor startAtSpeed: turnspeed])		(onexit [rightmotor stop. leftmotor stop.]))	(ontime 800 intercenter -> intersection)	(state intersection		(machine lookaround			(var rdist :=[0])			(var fdist := [0])			(var ldist :=[0])			(state right				(onentry [					headmotor  moveToAbsolutePositionSpeed: turnspeed								position: 90 brake: false] )				(onexit [rdist := ultsensor read]))			(state front				(onentry [					headmotor  moveToAbsolutePositionSpeed: turnspeed								position: 0 brake: false] )				(onexit [fdist := ultsensor read]))			(state left				(onentry [					headmotor  moveToAbsolutePositionSpeed: turnspeed								position: -90 brake: false] )				(onexit [ldist := ultsensor read]))			(state pub				(onentry [					headmotor  moveToAbsolutePositionSpeed: turnspeed								position: 0 brake: false.					(Array with: rdist with:  fdist with: ldist) inspect] ))			(ontime 800 right -> front)			(ontime 800  front -> left)			(ontime 800  left -> pub))		(onentry (spawn lookaround right))))(spawn onestep line)